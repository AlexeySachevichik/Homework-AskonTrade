$(document).ready(function(){function e(){z=d/1e3*h/1e3,$(".size_result").html(" = "+z.toFixed(4)+" м<sup>2</sup>")}function i(){$(".additional").children(".sumbit").hide(),t()}function t(){var e="",i=l[s].name,t=a[n].title,o="",r=0,c=0,d=z*l[s].factor;if(void 0==f)o="",void 0;else for(var v in f)o=" - "+v,f[v];$(".total_table").empty(),e+="<table><tr><th>наименование</th><th>цена</th></tr>",e+="<tr><td>Производитель - "+i+"</td><td></td></tr>",e+="<tr><td>"+t+o+"</td><td>"+d.toFixed(2)+" бел. руб</td></tr>",r+=d;for(var v in _)e+="<tr><td>"+v+"</td><td>"+_[v]+" бел. руб</td></tr>",r+=_[v];e+="</table>",c=.75*r,e+='<h1 class="total_title"><span class="open_sans">Итого:</span><span class="line">'+r.toFixed(2)+'</span><span class="rub">бел. руб.</span><span class="sale">'+c.toFixed(2)+'</span><span class="rub">бел. руб.</span></h1>',e+="<p>Возможна рассрочка до 10 месяцев ("+(c/10).toFixed(2)+" бел.руб в месяц)</p>",$(".total_table").append(e)}var l={0:{name:"DEXEN",factor:1},1:{name:"BRUSBOX",factor:2},2:{name:"KBE",factor:3},3:{name:"REHAU",factor:4},4:{name:"SALAMANDER",factor:5}},a={0:{name:"Окна",title:"Окно",img:"window_size.png",factor:1,minH:1,maxH:1e3,minV:1,maxV:1100,type:{"Одностворчатые":{"Глухое":1,"Поворотное":2,"Фрамужное":3},"Двухстворчатое":{"Пункт 1":1,"Пункт 2":2,"Пункт 3":3,"Пункт 4":4},"Трехстворчатое":5},additional:{"Подоконник":6,"Отлив":7,"Сетка":8,"Монтаж":9,"Теплый откос":10}},1:{name:"Балконные рамы",title:"Балконная рама",img:"window_size_2.png",factor:1,minH:1,maxH:2e3,minV:1,maxV:2200,type:{"Пункт 1":1,"Пункт 2":1,"Пункт 3":1},additional:{"Подоконник":1,"Отлив":1,"Сетка":1,"Монтаж":1}},2:{name:"Балконные блоки",title:"Балконный блок",img:"window_size_2.png",factor:1,minH:1,maxH:3e3,minV:1,maxV:3300,type:{"Пункт 5":1,"Пункт 6":1},additional:{"Подоконник":1,"Отлив":1,"Сетка":1}},3:{name:"Двери",title:"Дверь",img:"window_size.png",factor:1,minH:1,maxH:4e3,minV:1,maxV:4400,type:{"Пункт4":1},additional:{"Подоконник":1,"Отлив":1}}},s=void 0,n=void 0,o="img/",r=0,c=0,d=0,v=1,p=0,m=0,h=0,u=1,f={},_={},z=0,y=!0,x=!1;!function(){var e="",i=0,t=0;for(var a in l)e+="<li>"+l[a].name+"</li>",i++;t=100/i,$(".firmname").append(e),$(".firmname > li").css("width",t+"%")}(),function(){var e="",i=0,t=0;for(var l in a)e+="<li>"+a[l].name+"</li>",i++;t=100/i,$(".construction").append(e),$(".construction > li").css("width",t+"%")}(),$(".firmname > li").on("click",function(e){e.preventDefault();var t=$(this).closest("li").index();s!=t?($(this).addClass("selected").siblings().removeClass("selected"),s=$(this).closest("li").index(),x&&void 0!=n&&i()):($(".firmname > li").removeClass("selected"),s=void 0,x&&void 0!=n&&$(".total_table").empty().append('<h1 class="total_title"><span class="open_sans">Итого: 0</span><span class="rub">бел. руб.</span></h1>'))}),$(".construction li").on("click",function(l){l.preventDefault();var z=$(this).closest("li").index();n!=z&&void 0!=s?($(this).addClass("selected").siblings().removeClass("selected"),n=$(this).closest("li").index(),$(".option").css("display","block"),function(){var e="",i=a[n].type;for(var t in i)if("object"==typeof i[t]){e+='<li class="accordion close"><span>'+t+"</span><ul>";for(var l in i[t])e+='<li><span class="constTypeLink" data-factor="'+i[t][l]+'">'+l+"</span></li>";e+="</ul></li>"}else e+='<li><span class="constTypeLink" data-factor="'+i[t]+'">'+t+"</span></li>";$(".construction_type").empty(),$(".construction_type").append(e),f={}}(),function(e){var i='<img src="'+(o+a[e].img)+'" alt="">';$(".window_size_block").children("img").replaceWith(i)}(z),function(){var e="",i=a[n].additional;for(var t in i)e+='<div class="item additionalItemLink" data-factor="'+i[t]+'"><div class="check"><svg viewBox="0 0 26 26"><path d="m.3,14c-0.2-0.2-0.3-0.5-0.3-0.7s0.1-0.5 0.3-0.7l1.4-1.4c0.4-0.4 1-0.4 1.4,0l.1,.1 5.5,5.9c0.2,0.2 0.5,0.2 0.7,0l13.4-13.9h0.1v-8.88178e-16c0.4-0.4 1-0.4 1.4,0l1.4,1.4c0.4,0.4 0.4,1 0,1.4l0,0-16,16.6c-0.2,0.2-0.4,0.3-0.7,0.3-0.3,0-0.5-0.1-0.7-0.3l-7.8-8.4-.2-.3z"/></svg></div><div class="title">'+t+"</div></div>";$(".calculator .option .additional").empty(),$(".calculator .option .additional").append(e),$(".calculator .option .additional").append('<div class="sumbit">Рассчитать</div>'),_={}}(),r=a[n].minH,c=a[n].maxH,d=r,p=a[n].minV,m=a[n].maxV,h=p,y&&e(),x&&i(),$(".resize_horizantal_slider").slider({value:d,min:r,max:c,step:v,slide:function(t,l){$(".horizontal").val(l.value),$(".titleHorizontal").html(l.value+" мм"),d=l.value,y&&e(),x&&i()}}),$(".resize_horizantal_slider .ui-slider-handle").html('<div class="scroll_button"><svg viewBox="0 0 100 100"><circle class="fil0" cx="50" cy="50" r="50"/><circle class="fil1" cx="50" cy="50" r="20"/></svg><div class="titleHorizontal"></div></div>'),$(".horizontal").val($(".resize_horizantal_slider").slider("value")),$(".titleHorizontal").html($(".resize_horizantal_slider").slider("value")+" мм"),$(".resize_vertical_slider").slider({value:h,min:p,max:m,step:u,orientation:"vertical",slide:function(t,l){$(".vertical").val(l.value),$(".titleVertical").html(l.value+" мм"),h=l.value,x&&i(),y&&e()}}),$(".resize_vertical_slider .ui-slider-handle").html('<div class="scroll_button"><svg viewBox="0 0 100 100"><circle class="fil0" cx="50" cy="50" r="50"/><circle class="fil1" cx="50" cy="50" r="20"/></svg><div class="titleVertical"></div></div></div>'),$(".vertical").val($(".resize_vertical_slider").slider("value")),$(".titleVertical").html($(".resize_vertical_slider").slider("value")+" мм"),$(".total_table").empty().append('<h1 class="total_title"><span class="open_sans">Итого: 0</span><span class="rub">бел. руб.</span></h1>')):($(".option").css("display","none"),$(".construction > li").removeClass("selected"),n=void 0,constTypeFactor=void 0,f={},_={},$(".total_table").empty().append('<h1 class="total_title"><span class="open_sans">Итого: 0</span><span class="rub">бел. руб.</span></h1>')),$(".accordion > span").on("click",function(e){e.preventDefault();var i=$(this).parent();i.hasClass("close")?(i.removeClass("close"),i.addClass("open"),i.children("ul").css("display","block")):(i.removeClass("open"),i.addClass("close"),i.children("ul").css("display","none"))}),$(".constTypeLink").on("click",function(e){e.preventDefault(),$(this).hasClass("selected")?($(".constTypeLink").removeClass("selected"),x&&i()):($(".constTypeLink").removeClass("selected"),$(this).addClass("selected"),(f={})[$(this).html()]=$(this).data("factor"),x&&i())}),$(".additionalItemLink").on("click",function(e){e.preventDefault();var t=$(this).data("factor"),l=$(this).children(".check").children("svg"),a=$(this).children(".title").html();l.hasClass("checked")?(l.removeClass("checked"),l.css("display","none"),delete _[a],x&&i()):(l.addClass("checked"),l.css("display","block"),_[a]=t,x&&i())}),$(".calculator .sumbit").on("click",function(e){e.preventDefault(),t()})}),$(".horizontal").on("change",function(t){t.preventDefault();var l=$(".horizontal").val();r<=l&&l<=c?(d=l,$(".titleHorizontal").html(d+" мм"),$(".resize_horizantal_slider").slider("option","value",d),y&&e(),x&&i()):($(".horizontal").val(d),$(".titleHorizontal").html(d+" мм"),$(".resize_horizantal_slider").slider("option","value",d),y&&e(),x&&i())}),$(".resize_horizantal .left").on("click",function(t){t.preventDefault();var l=d-v;r<=l&&(d=l,$(".horizontal").val(d),$(".titleHorizontal").html(d+" мм"),$(".resize_horizantal_slider").slider("option","value",d),y&&e(),x&&i())}),$(".resize_horizantal .rigth").on("click",function(t){t.preventDefault();var l=d+v;l<=c&&(d=l,$(".horizontal").val(d),$(".titleHorizontal").html(d+" мм"),$(".resize_horizantal_slider").slider("option","value",d),y&&e(),x&&i())}),$(".vertical").on("change",function(t){t.preventDefault();var l=$(".vertical").val();p<=l&&l<=m?(h=l,$(".titleVertical").html(h+" мм"),$(".resize_vertical_slider").slider("option","value",h),y&&e(),x&&i()):($(".vertical").val(h),$(".titleVertical").html(h+" мм"),$(".resize_vertical_slider").slider("option","value",h),y&&e(),x&&i())}),$(".resize_vertical .bottom").on("click",function(t){t.preventDefault();var l=h-u;p<=l&&(h=l,$(".vertical").val(h),$(".titleVertical").html(h+" мм"),$(".resize_vertical_slider").slider("option","value",h),y&&e(),x&&i())}),$(".resize_vertical .top").on("click",function(t){t.preventDefault();var l=h+u;l<=m&&(h=l,$(".vertical").val(h),$(".titleVertical").html(h+" мм"),$(".resize_vertical_slider").slider("option","value",h),y&&e(),x&&i())})});